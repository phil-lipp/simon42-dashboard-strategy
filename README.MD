# simon42 Dashboard Strategy

> **âš ï¸ Hinweis:** Diese README wird nicht laufend aktualisiert, sondern nur gelegentlich und leider auch viel zu unregelmÃ¤ÃŸig. Der aktuelle Code ist vermutlich bereits weiter als hier dokumentiert. Im Zweifel: Code ist die Dokumentation! ğŸ˜…

Eine modulare und hochkonfigurierbare Dashboard-Strategy fÃ¼r Home Assistant, die automatisch Views basierend auf Bereichen, EntitÃ¤ten und deren ZustÃ¤nden generiert. WÃ¤chst mit dem User mit und ist sowohl fÃ¼r AnfÃ¤nger als auch Fortgeschrittene interessant.

[![Open your Home Assistant instance and open a repository inside the Home Assistant Community Store.](https://my.home-assistant.io/badges/hacs_repository.svg)](https://my.home-assistant.io/redirect/hacs_repository/?owner=TheRealSimon42&repository=simon42-dashboard-strategy&category=plugin)

---

## ğŸ’– UnterstÃ¼tze dieses Projekt

Wenn dir die simon42 Dashboard Strategy hilft, unterstÃ¼tze die Weiterentwicklung:

<p align="center">
  <a href="https://youtube.com/@simon42/join">
    <img src="https://img.shields.io/badge/YouTube-Kanalmitglied_werden-FF0000?style=for-the-badge&logo=youtube&logoColor=white" alt="YouTube Kanalmitglied werden" />
  </a>
  <br/>
  <em>ğŸ«¶ Bevorzugte UnterstÃ¼tzung: Werde Kanalmitglied auf YouTube!</em>
  <br/><br/>
  <a href="https://www.buymeacoffee.com/simon42official">
    <img src="https://img.shields.io/badge/Buy_Me_A_Coffee-Spende_einen_Kaffee-FFDD00?style=for-the-badge&logo=buy-me-a-coffee&logoColor=black" alt="Buy Me A Coffee" />
  </a>
</p>

---

## âœ¨ Features im Ãœberblick

### ğŸ¨ Benutzerfreundlichkeit
- **Grafischer Konfigurator** - Keine YAML-Kenntnisse erforderlich
- **Drag & Drop** - Einfache Neuordnung von Bereichen
- **Intuitive Hierarchie** - Area â†’ Domain â†’ Entity-Struktur
- **Echtzeit-Updates** - Ã„nderungen werden sofort gespeichert
- **Responsive Design** - Optimiert fÃ¼r Desktop, Tablet und Mobile

### ğŸ  Intelligente Automatisierung
- **Automatische Raum-Erkennung** - Nutzt Home Assistant Areas & Devices
- **Dynamische Gruppierung** - Entities nach Status und Typ gruppiert
- **Floor-basierte Organisation** - Optional: Bereiche nach Etagen gruppieren
- **Batch-Aktionen** - Gruppensteuerung Ã¼ber Heading-Badges
- **Reaktive Updates** - Echtzeit-Aktualisierung der Summary Cards

### ğŸ”§ Granulare Kontrolle
- **Entity-Level-Filterung** - Verstecke einzelne Entities pro Raum und Domain
- **Label-System** - Globale Entity-Filterung via `no_dboard` Label
- **Bereich-spezifische Konfiguration** - Jeder Raum individuell anpassbar
- **Domain-Gruppierung** - Intelligente Zusammenfassung nach Entity-Typen
- **Favoriten-System** - Markiere wichtige EntitÃ¤ten in der Ãœbersicht
- **Raum-Pins** - Pinne spezielle EntitÃ¤ten in ihren zugeordneten RÃ¤umen

### ğŸ“Š Spezialisierte Views
- **Lichter-Ãœbersicht** - Alle Lichter, gruppiert nach Status (on/off)
- **Rollos & VorhÃ¤nge** - Covers gruppiert nach Position (offen/geschlossen)
- **Sicherheit** - TÃ¼ren, Fenster, SchlÃ¶sser mit Status-Ãœbersicht
- **Batterie-Status** - Kritische, niedrige und gute Batterien
- **Raum-Details** - Pro Bereich mit allen relevanten Entities

### âš¡ Performance
- **Registry-Caching** - Reduzierte WebSocket-Calls um 85%
- **Optimierte Filterung** - Domain-Filter vor komplexen Validierungen
- **Set-basierte Lookups** - Schnelle Entity-Suche
- **Lazy Loading** - Entities werden erst bei Bedarf geladen

### ğŸ”Œ Optionale Integrationen
- **Search Card Support** - Integration fÃ¼r custom search cards
- **Alarm Panel** - UnterstÃ¼tzung fÃ¼r Alarmanlagen
- **Reolink Kameras** - Erweiterte Kamera-Integration
- **Masonry Layout** - Integration des s42-masonry-view Projekts

## ğŸ“¦ Installation

### Option 1: Manuelle Installation (Nicht empfohlen!)

<details>

<summary>Manuelle Installationsschritte</summary>

#### Schritt 1: Dateien kopieren

Kopiere alle Dateien aus dem `dist` Ordner nach:
```
/config/www/simon42-strategy/
```

#### Schritt 2: Resource registrieren

FÃ¼ge in deiner `configuration.yaml` hinzu:

```yaml
lovelace:
  mode: storage
  resources:
    - url: /local/simon42-strategy/simon42-dashboard-strategy.js
      type: module
```

#### Schritt 3: Home Assistant neu starten

Starte Home Assistant neu, damit die neue Resource geladen wird.

#### Schritt 4: Dashboard erstellen

1. Gehe zu **Einstellungen** â†’ **Dashboards**
2. Klicke auf **Dashboard hinzufÃ¼gen**
3. WÃ¤hle **Neue Ansicht** und dann den **Edit-Modus**
4. Klicke auf die **drei Punkte** (â‹®) â†’ **Raw-Konfigurationseditor**
5. FÃ¼ge die folgende Konfiguration ein:

```yaml
strategy:
  type: custom:simon42-dashboard
```

6. Speichere und schlieÃŸe - der grafische Editor Ã¶ffnet sich automatisch!

</details>

### Option 2: Installation Ã¼ber HACS (empfohlen)

[![Open your Home Assistant instance and open a repository inside the Home Assistant Community Store.](https://my.home-assistant.io/badges/hacs_repository.svg)](https://my.home-assistant.io/redirect/hacs_repository/?owner=TheRealSimon42&repository=simon42-dashboard-strategy&category=plugin)


<details>

<summary>Alternative zum Button oben ğŸ‘†</summary>

1. Gehe zu HACS â†’ **Custom repositories**
2. FÃ¼ge das Repository hinzu: `https://github.com/TheRealSimon42/simon42-dashboard-strategy`
3. Installiere die "Simon42 Dashboard Strategy"
4. Folge den Anweisungen in HACS fÃ¼r die Resource-Registrierung und Dashboard-Erstellung.

</details>

## ğŸ–¥ï¸ Benutzung / Dashboard erstellen

1. Gehe zu **Einstellungen** â†’ **Dashboards**
2. Klicke auf **Dashboard hinzufÃ¼gen**
3. WÃ¤hle **Neues Dashboard von Grund auf** und vergebe einen Namen
4. Dann das neue Dashboard aufrufen und den **Edit-Modus** oben rechts aktivieren.
5. Klicke auf die **drei Punkte** (â‹®) â†’ **Raw-Konfigurationseditor**
6. FÃ¼ge die folgende Konfiguration ein:

```yaml
strategy:
  type: custom:simon42-dashboard
```

**Wichtig:** Nach Updates den Browser-Cache leeren:
- **Hard Refresh**: `Ctrl+Shift+R` (Windows) oder `Cmd+Shift+R` (Mac)
- **Chrome DevTools**: F12 â†’ Rechtsklick auf Refresh â†’ "Empty Cache and Hard Reload"

Die aktuelle Version wird in der Browser-Konsole angezeigt. PrÃ¼fe `window.Simon42DashboardVersion` fÃ¼r Details.

## ğŸ¤– Projekt-Kontext fÃ¼r KI-Assistenten

Dieses Projekt ist eine modulare Lovelace Dashboard-Strategy fÃ¼r Home Assistant, entwickelt von Simon42. Es generiert automatisch Views basierend auf HA-Areas, Devices und Entities. Die Codebasis ist in JavaScript (ES6-Module) strukturiert:

- **Entry-Point**: `dist/simon42-dashboard-strategy.js` (lÃ¤dt den Loader)
- **Loader**: `dist/simon42-strategies-loader.js` (importiert alle Module)
- **Core**: Haupt-Strategy und Editor in `dist/core/`
- **Utils**: Hilfsfunktionen in `dist/utils/`
- **Views**: Spezialisierte View-Strategien in `dist/views/`
- **Cards**: Custom Cards in `dist/cards/`

FÃ¼r Ã„nderungen: Respektiere die modulare Struktur, nutze ES6-Imports/Exports, teste in HA-Umgebung. HACS-kompatibel seit Version 1.0.2.

## ğŸ¨ Grafischer Konfigurator

Der Editor bietet eine intuitive dreistufige Hierarchie zur Konfiguration:

### Stufe 1: Bereiche verwalten

```
â˜° Drag-Handle        Ziehe Bereiche, um die Reihenfolge zu Ã¤ndern
â˜‘ï¸ Area-Checkbox      Bereich ein-/ausblenden
â–¶ Expand-Button       Klappt Domain-Gruppen auf
ğŸ“Š Entity-Counter     Anzahl der Entities im Bereich
```

**Beispiel:**
```
â˜° â˜‘ï¸ â–¶ Wohnzimmer (12)
â˜° â˜‘ï¸ â–¶ KÃ¼che (8)
â˜° â˜ â–¶ Garage (5)      â† ausgeblendet
```

### Stufe 2: Domain-Gruppen

Nach dem Aufklappen eines Bereichs siehst du die Entity-Domains:

```
â˜‘ï¸ Gruppen-Checkbox   Alle Entities dieser Domain ein-/ausblenden
âŠŸ Indeterminate       Bei teilweise ausgewÃ¤hlten Entities
ğŸ”§ Domain-Icon        Visuelles Symbol fÃ¼r die Domain
ğŸ“Š Entity-Count       Anzahl der Entities in dieser Domain
â–¶ Expand-Button       Klappt Entity-Liste auf
```

**Beispiel:**
```
â–¼ Wohnzimmer
   â˜‘ï¸ ğŸ’¡ Beleuchtung (5)
   âŠŸ ğŸŒ¡ï¸ Klima (2)      â† teilweise ausgewÃ¤hlt
   â˜‘ï¸ ğŸªŸ Rollos (3)
```

### Stufe 3: Einzelne Entities

In der aufgeklappten Entity-Liste:

```
â˜‘ï¸ Entity-Checkbox    Entity ein-/ausblenden
ğŸ“ Friendly-Name      Lesbarer Entity-Name
ğŸ”¤ Entity-ID          Technische ID (monospace)
```

**Beispiel:**
```
â–¼ ğŸ’¡ Beleuchtung (5)
   â˜‘ï¸ Deckenlampe        (light.wohnzimmer_decke)
   â˜‘ï¸ Stehlampe          (light.wohnzimmer_stehlampe)
   â˜ Alte Lampe          (light.wohnzimmer_alt) â† ausgeblendet
```

### Editor-Features

- **Persistenter State** - Aufgeklappte Bereiche bleiben wÃ¤hrend der Konfiguration offen
- **Automatisches Speichern** - Ã„nderungen werden sofort in die Config Ã¼bernommen
- **Intelligente Gruppierung** - Entities werden automatisch nach Domain erkannt
- **Visuelle Hierarchie** - EinrÃ¼ckungen zeigen die Struktur klar
- **Drag & Drop** - Intuitive Neuordnung per Maus

## âš™ï¸ Konfiguration

### Basis-Konfiguration

```yaml
strategy:
  type: custom:simon42-dashboard
  show_weather: true             # Wetter-Karte anzeigen
  show_energy: true              # Energie-Dashboard anzeigen
  show_subviews: false           # Utility Views als Subviews
  show_search_card: false        # Optional: Search Card in Overview
  show_covers_summary: true      # Rollo-Zusammenfassung anzeigen
  summaries_columns: 2           # Layout: 2 (2x2) oder 4 (1x4)
  group_by_floors: false         # Bereiche nach Etagen gruppieren
```

### Erweiterte Konfiguration mit Entity-Filterung

```yaml
strategy:
  type: custom:simon42-dashboard
  show_weather: true
  show_energy: true
  show_subviews: false
  group_by_floors: true
  
  # Bereich-Verwaltung
  areas_display:
    hidden: 
      - bad
      - garage
    order:
      - wohnzimmer
      - kueche
      - schlafzimmer
  
  # Entity-Filterung pro Bereich
  areas_options:
    wohnzimmer:
      groups_options:
        lights:
          hidden: 
            - light.stehlampe
            - light.alte_lampe
          order:
            - light.decke
            - light.couch
            - light.schrank
        climate:
          hidden:
            - climate.old_thermostat
        covers:
          hidden:
            - cover.rollo_links
    
    kueche:
      groups_options:
        lights:
          hidden:
            - light.dunstabzug
        switches:
          hidden:
            - switch.kaffeemaschine
```

### Konfigurations-Parameter

#### Globale Optionen

| Parameter | Typ | Standard | Beschreibung |
|-----------|-----|----------|--------------|
| `show_weather` | boolean | `true` | Zeigt die Wetter-Karte in der Ãœbersicht (falls Weather-Entity vorhanden) |
| `show_energy` | boolean | `true` | Zeigt das Energie-Dashboard in der Ãœbersicht |
| `show_subviews` | boolean | `false` | Zeigt Utility-Views in der Navigation |
| `show_search_card` | boolean | `false` | Zeigt optional eine Search Card in der Ãœbersicht |
| `show_covers_summary` | boolean | `true` | Zeigt die Rollo-Zusammenfassungskarte in der Ãœbersicht |
| `summaries_columns` | number | `2` | Layout der Zusammenfassungskarten: `2` (2x2 Grid) oder `4` (1x4 Reihe) |
| `group_by_floors` | boolean | `false` | Gruppiert Bereiche nach Etagen/Floors |

#### `areas_display` - Bereich-Verwaltung

```yaml
areas_display:
  hidden: [area_id1, area_id2]   # Array: IDs der ausgeblendeten Bereiche
  order: [area_id3, area_id1]    # Array: Custom Sortierung der Bereiche
```

#### `areas_options` - Entity-Verwaltung

```yaml
areas_options:
  {area_id}:                     # ID des Bereichs
    groups_options:              # Domain-spezifische Optionen
      {domain}:                  # Domain-Name (z.B. lights, climate, covers)
        hidden: [entity_id1]     # Array: Ausgeblendete Entity-IDs
        order: [entity_id2]      # Array: Custom Sortierung der Entities
```

**VerfÃ¼gbare Domains:**
- `lights` - Beleuchtung
- `climate` - KlimagerÃ¤te (Thermostate, AC)
- `covers` - Rollos, VorhÃ¤nge, Jalousien
- `switches` - Schalter
- `sensors` - Sensoren
- `binary_sensors` - BinÃ¤re Sensoren
- `cameras` - Kameras
- `media_players` - Media Player
- `locks` - SchlÃ¶sser
- `vacuum` - Saugroboter
- `fan` - Ventilatoren

## ğŸ·ï¸ Label-System

### Globale Labels

Das Dashboard unterstÃ¼tzt Labels fÃ¼r die globale Filterung:

| Label | Funktion | Verwendung |
|-------|----------|------------|
| `no_dboard` | **Globale Exklusion** | Entity wird nirgendwo im Dashboard angezeigt, auch nicht im Konfigurator |
| `show_dboard` | *Reserviert* | FÃ¼r zukÃ¼nftige Verwendung |

### Label verwenden

1. Gehe zu **Einstellungen** â†’ **GerÃ¤te & Dienste** â†’ **Entities**
2. WÃ¤hle die gewÃ¼nschte Entity aus
3. Klicke auf **Labels** und fÃ¼ge `no_dboard` hinzu

**Ideal fÃ¼r:**
- Debug-Sensoren
- Hilfs-Entities
- Template-Sensoren fÃ¼r Automatisierungen
- Interne Systemwerte

### Kombinierbarkeit

Labels und `groups_options` ergÃ¤nzen sich perfekt:

```yaml
# Beispiel-Setup:

# Global versteckt (Label):
- light.debug_light (hat Label "no_dboard")
  â†’ Wird nirgendwo im Dashboard angezeigt

# Im Wohnzimmer versteckt (Config):
- light.stehlampe (in groups_options.lights.hidden)
  â†’ Wird nur im Wohnzimmer nicht angezeigt
  â†’ Erscheint aber z.B. in der Lichter-Ãœbersicht
```

**Filterlogik:**
1. âœ… `no_dboard` Label â†’ **Globale Exklusion**
2. âœ… `groups_options.hidden` â†’ **Bereich-spezifische Exklusion**
3. âœ… Entity Registry Status â†’ Disabled/Hidden Entities werden gefiltert
4. âœ… Entity Category â†’ Config/Diagnostic Entities werden gefiltert

## ğŸ—ï¸ Projekt-Architektur

### Verzeichnisstruktur

```
simon42-strategy/
â”œâ”€â”€ simon42-strategies-loader.js          # Entry Point - lÃ¤dt alle Module
â”‚
â”œâ”€â”€ core/                                 # Kern-Module
â”‚   â”œâ”€â”€ simon42-dashboard-strategy.js     # Haupt-Strategy, generiert Dashboard-Struktur
â”‚   â”œâ”€â”€ simon42-dashboard-strategy-editor.js  # GUI-Editor fÃ¼r Konfiguration
â”‚   â””â”€â”€ editor/                           # Editor-Komponenten
â”‚       â”œâ”€â”€ simon42-editor-handlers.js    # Event-Handler (Drag&Drop, Checkboxen)
â”‚       â”œâ”€â”€ simon42-editor-styles.js      # CSS fÃ¼r Editor (Hierarchie-Styling)
â”‚       â””â”€â”€ simon42-editor-template.js    # HTML-Template (Area â†’ Domain â†’ Entity)
â”‚
â”œâ”€â”€ utils/                                # Utility-Module
â”‚   â”œâ”€â”€ simon42-helpers.js                # Helper-Funktionen (Filterung, Sortierung)
â”‚   â”œâ”€â”€ simon42-data-collectors.js        # Datensammlung (Lichter, Covers, Security...)
â”‚   â”œâ”€â”€ simon42-badge-builder.js          # Badge-Erstellung fÃ¼r Views
â”‚   â”œâ”€â”€ simon42-section-builder.js        # Section-Erstellung (Grid-Layouts)
â”‚   â””â”€â”€ simon42-view-builder.js           # View-Definitionen
â”‚
â”œâ”€â”€ views/                                # View-Strategies
â”‚   â”œâ”€â”€ simon42-view-room.js              # Raum-Details (pro Bereich, config-aware)
â”‚   â”œâ”€â”€ simon42-view-lights.js            # Lichter-Ãœbersicht (on/off gruppiert)
â”‚   â”œâ”€â”€ simon42-view-covers.js            # Rollos/VorhÃ¤nge (open/closed gruppiert)
â”‚   â”œâ”€â”€ simon42-view-security.js          # Sicherheit (TÃ¼ren, Fenster, SchlÃ¶sser)
â”‚   â””â”€â”€ simon42-view-batteries.js         # Batterie-Status (kritisch/niedrig/gut)
â”‚
â””â”€â”€ cards/                                # Custom Cards
    â””â”€â”€ simon42-summary-card.js           # Reaktive Summary Card mit Echtzeit-Updates
```

### Datenfluss

```
1. Loader (simon42-strategies-loader.js)
   â””â”€> Registriert alle Module als Custom Elements

2. Core Strategy (simon42-dashboard-strategy.js)
   â”œâ”€> Liest Home Assistant Registries (Areas, Devices, Entities, Floors)
   â”œâ”€> Sammelt Daten via Data Collectors
   â”œâ”€> Erstellt Sections via Section Builder
   â”œâ”€> Generiert Views via View Builder
   â””â”€> Ãœbergibt Config (areas_options) an View-Strategies

3. View Strategies (z.B. simon42-view-room.js)
   â”œâ”€> EmpfÃ¤ngt Config und Registries
   â”œâ”€> Filtert Entities basierend auf:
   â”‚   â”œâ”€> no_dboard Label
   â”‚   â”œâ”€> areas_options.groups_options.hidden
   â”‚   â”œâ”€> Entity Registry Status
   â”‚   â””â”€> Entity Category
   â”œâ”€> Gruppiert Entities nach Domain und Status
   â””â”€> Generiert finale Card-Konfigurationen

4. Editor (simon42-dashboard-strategy-editor.js)
   â”œâ”€> LÃ¤dt bestehende Config
   â”œâ”€> LÃ¤dt Entities dynamisch beim Aufklappen
   â”œâ”€> Verwaltet Expand-State persistent
   â””â”€> Feuert config-changed Events bei Ã„nderungen
```

### Custom Elements

Das Dashboard registriert folgende Custom Elements:

- `ll-strategy-simon42-dashboard` - Haupt-Dashboard-Strategy
- `simon42-dashboard-strategy-editor` - Grafischer Konfigurations-Editor
- `ll-strategy-simon42-view-room` - Raum-View-Strategy
- `ll-strategy-simon42-view-lights` - Lichter-View-Strategy
- `ll-strategy-simon42-view-covers` - Covers-View-Strategy
- `ll-strategy-simon42-view-security` - Security-View-Strategy
- `ll-strategy-simon42-view-batteries` - Batterie-View-Strategy

## ğŸ“Š Spezialisierte Views

### ğŸ  Raum-View (Room)

**Navigation:** Bereiche â†’ [Raumname]

Pro Bereich wird automatisch eine Detail-Ansicht generiert:

**Sections:**
- **Beleuchtung** - Alle Lichter mit Batch-Aktionen (on/off)
- **Klima** - Thermostate, AC-GerÃ¤te mit Temperatur-Control
- **Rollos & VorhÃ¤nge** - Cover-Entities mit open/close/stop
- **Kameras** - Live-Ansicht (mit Reolink-Support)
- **Sensoren** - Temperatur, Luftfeuchtigkeit, etc.
- **Sonstiges** - Vacuum, Fans, Switches, etc.

**Features:**
- Name-Stripping: Raumnamen werden automatisch aus Entity-Namen entfernt
- Config-Aware: Respektiert `areas_options.groups_options.hidden`
- Batch-Aktionen: Heading-Badges fÃ¼r Gruppensteuerung
- Last Changed: Sortierung nach letzter AktivitÃ¤t
- Smart Sensor Selection: Verwendet bevorzugt die in der Area-Konfiguration hinterlegten Temperatur- und Luftfeuchtigkeitssensoren (Fallback: automatisch erkannte Sensoren)
- Raum-Pins: Zeige spezielle EntitÃ¤ten am Ende der Raum-View (ideal fÃ¼r Wetterstationen, Admin-Sensoren, etc.)

### ğŸ’¡ Lichter-Ãœbersicht

**Navigation:** Lichter

Zeigt alle Lichter im Haus, gruppiert nach Status:

**Gruppen:**
- **Eingeschaltete Lichter** - Sofort sichtbar und steuerbar
- **Ausgeschaltete Lichter** - Collapsible Section

**Features:**
- Batch-Kontrolle Ã¼ber Heading-Badges
- Brightness-Slider fÃ¼r dimmbare Lichter
- Echtzeit-Updates bei StatusÃ¤nderung

### ğŸªŸ Rollos & VorhÃ¤nge

**Navigation:** Rollos

Alle Cover-Entities, gruppiert nach Position:

**Gruppen:**
- **GeÃ¶ffnete Covers** - Aktuell offen/hochgefahren
- **Geschlossene Covers** - Aktuell geschlossen/heruntergefahren

**Features:**
- Open/Close/Stop Buttons
- Position-Slider fÃ¼r positionierbare Covers
- Name-Stripping: "Rollo", "Vorhang", "Cover" etc. werden entfernt (DE/EN)

### ğŸ”’ Sicherheit

**Navigation:** Sicherheit

Sicherheits-relevante Entities, gruppiert nach Typ:

**Kategorien:**
- **SchlÃ¶sser** - Locked/Unlocked Status
- **TÃ¼ren & Tore** - Open/Closed Status
- **Garagen** - Open/Closed/Opening/Closing
- **Fenster & Sensoren** - Open/Closed/Motion

**Features:**
- Farbcodierung nach Status (rot=unsicher, grÃ¼n=sicher)
- Alarm-Panel Integration (falls vorhanden)
- Device-Class basierte Kategorisierung

### ğŸ”‹ Batterie-Status

**Navigation:** Batterien

Alle Batterie-Entities, gruppiert nach Status:

**Gruppen:**
- **Kritisch** (< 20%) - Rot, sofortige Aufmerksamkeit
- **Niedrig** (20-50%) - Gelb, bald wechseln
- **Gut** (> 50%) - GrÃ¼n, alles okay

**Features:**
- Sortierung nach Batterie-Level
- Last Changed Anzeige
- Visuelle Warnung bei kritischen Batterien

## ğŸ¯ Erweiterte Features

### Raum-Pins

Pinne spezielle EntitÃ¤ten, die nur in ihren zugeordneten RÃ¤umen angezeigt werden sollen:

**Verwendung:**
1. Ã–ffne den Dashboard-Editor
2. Scrolle zur Sektion "Raum-Pins"
3. WÃ¤hle eine EntitÃ¤t aus dem Dropdown (nur EntitÃ¤ten mit Raum-Zuordnung)
4. Klicke auf "+ HinzufÃ¼gen"

**Ideal fÃ¼r:**
- Wetterstationen mit spezifischen Sensoren
- Admin-EntitÃ¤ten, die nicht automatisch erkannt werden
- Spezielle EntitÃ¤ten, die nur in einem bestimmten Raum relevant sind
- Entities mit speziellen Device-Classes

**Verhalten:**
- Pins erscheinen **nur** im zugeordneten Raum (nicht in der Ãœbersicht)
- Anzeige am **Ende** der Raum-View (nach allen anderen Sections)
- Ãœberschrift: "Raum-Pins" mit Pin-Icon

**Config:**
```yaml
strategy:
  type: custom:simon42-dashboard
  room_pin_entities:
    - sensor.wetterstation_temperatur
    - sensor.wetterstation_luftfeuchtigkeit
    - sensor.admin_sensor
```

### Floor-basierte Organisation

Mit `group_by_floors: true` werden Bereiche nach Etagen gruppiert:

```yaml
strategy:
  type: custom:simon42-dashboard
  group_by_floors: true
```

**Ergebnis:**
```
ğŸ“ Erdgeschoss
   â”œâ”€â”€ Wohnzimmer
   â”œâ”€â”€ KÃ¼che
   â””â”€â”€ GÃ¤ste-WC

ğŸ“ Obergeschoss
   â”œâ”€â”€ Schlafzimmer
   â”œâ”€â”€ Bad
   â””â”€â”€ Arbeitszimmer

ğŸ“ Weitere Bereiche
   â””â”€â”€ Garten
```

**Vorteile:**
- Bessere Ãœbersicht bei vielen Bereichen
- Logische Gruppierung nach physischer Lage
- Separate Sections mit Heading fÃ¼r jede Etage

### Performance-Optimierungen

Das Dashboard ist fÃ¼r maximale Performance optimiert:

**Registry-Caching:**
- Alle Registry-Daten werden aus dem `hass`-Objekt gelesen
- Keine WebSocket-Calls mehr nÃ¶tig
- **85% Reduktion** der API-Calls

**Intelligente Filterung:**
```javascript
// Reihenfolge der Filter (von gÃ¼nstig zu teuer):
1. Domain-basierte Filterung (Set-Lookup: O(1))
2. Label-Exklusion (no_dboard)
3. Area-Binding Checks
4. Entity Registry Validierung
5. State Availability Check
```

**Lazy Loading:**
- Entities werden erst beim Aufklappen geladen
- Kein unnÃ¶tiges Laden von versteckten Bereichen
- Reduzierte initiale Ladezeit

### Optionale Integrationen

#### Search Card

Aktiviere eine Search Card in der Ãœbersicht:

```yaml
strategy:
  type: custom:simon42-dashboard
  show_search_card: true
```

**Voraussetzung:**
- Custom Search Card muss installiert sein
- Wird automatisch erkannt und eingebunden

#### Alarm Panel

Falls ein `alarm_control_panel` existiert:
- Automatische Integration in Security-View
- Badge in der Ãœbersicht
- Steuerung direkt aus dem Dashboard

#### Reolink Kameras

Erweiterte UnterstÃ¼tzung fÃ¼r Reolink-Kameras:
- Automatische Erkennung von Reolink-Entities
- Optimierte Card-Konfiguration
- PTZ-Controls (falls unterstÃ¼tzt)

### Batch-Aktionen

Alle Gruppen-Views unterstÃ¼tzen Batch-Aktionen Ã¼ber Heading-Badges:

**Beispiel Lichter:**
```
[ğŸ’¡ Alle ein] [ğŸ’¡ Alle aus]  Eingeschaltete Lichter (5)
â”œâ”€â”€ Wohnzimmer Decke
â”œâ”€â”€ KÃ¼che Arbeitsplatte
â””â”€â”€ ...
```

**VerfÃ¼gbar fÃ¼r:**
- Lichter (Alle ein/aus)
- Rollos (Alle Ã¶ffnen/schlieÃŸen)
- Bereiche (Alle Lichter des Raums)

## ğŸ” Entity-Filterung im Detail

### Filterlogik (Reihenfolge)

```
1. Label-Exklusion (no_dboard)
   â”œâ”€> Globale Filterung via Labels
   â””â”€> Wird nirgendwo im Dashboard angezeigt

2. Area-ZugehÃ¶rigkeit
   â”œâ”€> Entities mit direkter Area-Zuweisung
   â””â”€> Entities Ã¼ber Device-Area-Zuweisung

3. Entity Category
   â””â”€> Keine config oder diagnostic Entities

4. Hidden/Disabled Status (Registry)
   â””â”€> Versteckte oder deaktivierte Entities

5. Availability
   â””â”€> Entity muss in hass.states existieren

6. groups_options.hidden (Config)
   â””â”€> Bereich-spezifische Filterung via Konfigurator
```

### Beispiel-Szenario

```yaml
# Gegeben:
Area: Wohnzimmer
Entities:
  - light.wohnzimmer_decke
  - light.wohnzimmer_debug (hat Label "no_dboard")
  - light.wohnzimmer_alt (disabled in Registry)
  - light.wohnzimmer_config (Entity Category: config)
  - light.wohnzimmer_stehlampe

Config:
  areas_options:
    wohnzimmer:
      groups_options:
        lights:
          hidden:
            - light.wohnzimmer_stehlampe

# Ergebnis im Wohnzimmer Raum-View:
âœ… light.wohnzimmer_decke
âŒ light.wohnzimmer_debug (Label)
âŒ light.wohnzimmer_alt (Disabled)
âŒ light.wohnzimmer_config (Category)
âŒ light.wohnzimmer_stehlampe (Config)

# Ergebnis in der Lichter-Ãœbersicht:
âœ… light.wohnzimmer_decke
âŒ light.wohnzimmer_debug (Label)
âŒ light.wohnzimmer_alt (Disabled)
âŒ light.wohnzimmer_config (Category)
âœ… light.wohnzimmer_stehlampe (nur im Raum-View ausgeblendet!)
```

## ğŸ¤ Contributing

### Maintainers gesucht! ğŸ”

Dieses Projekt sucht aktiv nach Maintainern, die bei der Weiterentwicklung helfen mÃ¶chten!

**Interessiert?**
- Erstelle Issues fÃ¼r Bugs oder Feature-Requests
- Pull Requests sind willkommen
- **Bitte teste PRs grÃ¼ndlich vor dem Einreichen** ğŸ«¶

### Pull Request Guidelines

1. **Feature Branch erstellen**
   ```bash
   git checkout -b feature/mein-neues-feature
   ```

2. **Code-Style beachten**
   - Kommentare auf Deutsch oder Englisch
   - JSDoc fÃ¼r Funktionen
   - AussagekrÃ¤ftige Commit-Messages

3. **Testen**
   - Teste alle Ã„nderungen in einem lokalen HA-Setup
   - PrÃ¼fe verschiedene Szenarien (mit/ohne Config, etc.)
   - Validiere die Performance

4. **Pull Request erstellen**
   - Beschreibe die Ã„nderungen ausfÃ¼hrlich
   - FÃ¼ge Screenshots hinzu (bei UI-Ã„nderungen)
   - Referenziere zugehÃ¶rige Issues

## ğŸ“‹ Roadmap & Geplante Features

- [x] Entity-Sortierung per Drag & Drop im Editor
- [ ] Preset-Templates fÃ¼r verschiedene Use-Cases
- [ ] Import von Views aus anderen Dashboards
- [x] Erweiterte Favoriten-Funktionen
- [ ] Themes & Custom Styling
- [ ] Export/Import von Konfigurationen
- [ ] Mehrsprachigkeit (i18n)

## ğŸ› Bekannte Probleme & Limitationen

- Editor kann bei sehr vielen Entities (>500) langsam werden
- Drag & Drop funktioniert nicht auf Touch-GerÃ¤ten optimal
- Einige Custom Cards werden mÃ¶glicherweise nicht korrekt gerendert
- Performance bei floor-basierten Layouts kann bei >20 Bereichen leiden

**Workarounds siehe GitHub Issues**

## ğŸ“„ Lizenz

**Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)**

### Du darfst:
- âœ… **Teilen** - Das Material kopieren und weiterverbreiten
- âœ… **Bearbeiten** - Das Material remixen, verÃ¤ndern und darauf aufbauen

### Unter folgenden Bedingungen:
- ğŸ“ **Namensnennung** - Angemessene Urheber-Nennung
- ğŸš« **Nicht kommerziell** - Keine kommerzielle Nutzung
- ğŸ”„ **Weitergabe unter gleichen Bedingungen** - Bei VerÃ¤nderungen unter gleicher Lizenz

### ğŸ’¼ Kommerzielle Nutzung

Interessiert an kommerzieller Nutzung? Kontaktiere mich fÃ¼r individuelle Lizenzvereinbarungen:

**ğŸ‘‰ [Kontaktformular](https://www.simon42.com/contact/)**

**Siehe LICENSE-Datei fÃ¼r vollstÃ¤ndige Details**

## ğŸ™ Credits & Danksagungen

- Home Assistant Community fÃ¼r Inspiration und Feedback
- Alle Contributor und Tester
- Entwickler der genutzten Custom Cards und Integrationen

## ğŸ“ Support & Kontakt

- **[GitHub Issues](https://github.com/TheRealSimon42/simon42-dashboard-strategy/issues)**
- **[simon42 Community](https://community.simon42.com/):** Suchfunktion hilft immer ğŸ˜œ 

---

**Entwickelt mit â¤ï¸ fÃ¼r die Home Assistant Community**

*Letzte Aktualisierung: Gelegentlich und zu unregelmÃ¤ÃŸig* ğŸ˜…
